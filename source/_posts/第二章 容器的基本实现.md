---
title: 第二章 容器的基本实现
date: 2024-08-23
updated: 2024-08-23
comments: true
category: Spring
tags:
  - 阅读
cover: https://tse4-mm.cn.bing.net/th/id/OIP-C.eMS-g_JljisGqOSt-MXCnwHaDt?w=272&h=174&c=7&r=0&o=5&dpr=1.3&pid=1.7
---



# 第二章 容器的基本实现

## 2.1 容器基本用法

“bean 是 Spring 中最核心的东西，因为 Spring 就像是个大水桶，而 bean 就像是容器中的水水桶脱离了水便也没什么用处了。”

### 1. 定义 Bean

> Spring 的目的是 让 bean 能称为一个纯粹的 POJO
>
> 因此定义 bean 就是定义 POJO

```java
public class MyTestBean{
    private String username = "mahua";
    // 省略 get 与 set方法，需要自己编写生成
}
```



### 2. 配置文件

在`resource`下编写配置文件`beanFactoryTest.xml`：

> 原文提供的 xml 代码中`springframework`大写的 S 需要改成小写

```XML
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="myTestBean" class="com.mahua.yace.pojo.MyTestBean"/>
</beans>
```



### 3. 测试代码

在 text 中编写测试类代码：

```java
@Test
void TestSimpleLoad(){
    BeanFactory bf = new XmlBeanFactory(new ClassPathResource("beanFactoryTest.xml"));
    MyTestBean myTestBean = (MyTestBean) bf.getBean("myTestBean");
    System.out.println(myTestBean.getUsername());
}
```

> 企业中使用的是 `ApplicationContext` 作为容器，而不是使用 BeanFactory。



### 4. 查看控制台会输出结果：

```
mahua
```



## 2.功能分析

这段测试代码完成的功能：

- 读取配置文件 `beanFactoryTest.xml`；
- 根据 `beanFactoryTest.xml` 中的配置找到对应的类 `MyTestBean` 的配置，并实例化；
- 调用实例化后的实例方法



完成这样的功能至少需要三个类：

- ConfigRead：用于读取及验证配置文件。
- ReflectionUtil：根据配置文件中的配置进行反射序列化。
- App：用于完成整个逻辑的串联。

![需要的三个类](https://web-tlias-mmh.oss-cn-beijing.aliyuncs.com/img/image-20240826172209335.png)



Spring 版本相差太大，放弃了，有请下一位。

![寄了](https://web-tlias-mmh.oss-cn-beijing.aliyuncs.com/img/th)

















